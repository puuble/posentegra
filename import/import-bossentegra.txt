{"AccountScreens":null,"AccountTransactionDocumentTypes":null,"AccountTransactionTypes":null,"AccountTypes":null,"Accounts":null,"Actions":[{"ActionType":"ExecuteScript","Name":"ENT- Komut Çalıştır","Parameter":"[{\"Key\":\"Function\",\"Value\":\"[:Function]\"},{\"Key\":\"Command\",\"Value\":\"[:Komut]\"},{\"Key\":\"Parameters\",\"Value\":\"[:Parametreler]\"},{\"Key\":\"RunInBackground\",\"Value\":\"[:RunInBGTrueFalse]\"}]","SortOrder":0},{"ActionType":"StartProcess","Name":"ENT- Program Çalıştır","Parameter":"[{\"Key\":\"FileName\",\"Value\":\"[:programDosyaYolu]\"},{\"Key\":\"Arguments\",\"Value\":\"[:Arg]\"},{\"Key\":\"UseShellExecute\",\"Value\":\"[:useShellTF]\"},{\"Key\":\"IsHidden\",\"Value\":\"[:isHiddenTF]\"}]","SortOrder":0},{"ActionType":"UpdateProgramSetting","Name":"ENT- Global Program Ayarı Değiştir","Parameter":"[{\"Key\":\"SettingName\",\"Value\":\"[:AyarAdı]\"},{\"Key\":\"SettingValue\",\"Value\":\"[:AyarDegeri]\"},{\"Key\":\"UpdateType\",\"Value\":\"Güncelle\"},{\"Key\":\"IsLocal\",\"Value\":\"False\"}]","SortOrder":0},{"ActionType":"LoopValues","Name":"ENT- Değer Döndür","Parameter":"[{\"Key\":\"Name\",\"Value\":\"[:Adı]\"},{\"Key\":\"Values\",\"Value\":\"[:Degerler]\"},{\"Key\":\"SplitChar\",\"Value\":null},{\"Key\":\"DisplayProgressForItems\",\"Value\":null},{\"Key\":\"ProgressTitle\",\"Value\":null}]","SortOrder":0},{"ActionType":"AddLineToTextFile","Name":"ENT- Text Dosyaya Satır Ekle","Parameter":"[{\"Key\":\"FilePath\",\"Value\":\"[:dosyaYolu]\"},{\"Key\":\"Text\",\"Value\":\"[:text]\"}]","SortOrder":0}],"AutoConfigurationTasks":null,"AutomationCommands":null,"CalculationSelectors":null,"CalculationTypes":null,"ChangePaymentTypes":null,"CustomReports":null,"Departments":null,"EntityScreens":null,"EntityTypes":null,"Numerators":null,"OrderTagGroups":null,"PaymentTypes":null,"PrintJobs":null,"PrinterTemplates":null,"Printers":null,"ProgramSettingValues":null,"Rules":[{"Actions":[{"ActionName":null,"CustomConstraint":null,"Name":"ENT- Program Çalıştır","ParameterValues":"programDosyaYolu=C:\\peClient\\images\\msg.lnk`Arg=`useShellTF=True`isHiddenTF=True","SortOrder":10}],"AppRuleMaps":[{"DepartmentId":0,"TerminalId":1,"TicketTypeId":0,"UserRoleId":0}],"ConstraintMatch":0,"EventName":"WorkPeriodStarts","Name":"ENT- BossEntegra Mesaj Sunucuyu Günbaşında Yeniden Başlat","RuleConstraints":"[]","SortOrder":40,"Tags":"BossEntegra"},{"Actions":[{"ActionName":null,"CustomConstraint":null,"Name":"ENT- Değer Döndür","ParameterValues":"Adı=WpDate`Degerler={REPORT SQL DETAILS:SELECT WP.Id From WorkPeriods WP WHERE (WP.PosEntegra is NULL OR WP.PosEntegra!='OK' AND WP.StartDate!=WP.EndDate):F.Id::{0}::,}","SortOrder":10}],"AppRuleMaps":[{"DepartmentId":0,"TerminalId":0,"TicketTypeId":0,"UserRoleId":0}],"ConstraintMatch":0,"EventName":"WorkPeriodEnds","Name":"ENT- BossEntegra günsonu bilgileri gönder","RuleConstraints":"[]","SortOrder":230,"Tags":"BossEntegra"},{"Actions":[{"ActionName":null,"CustomConstraint":"","Name":"ENT- Komut Çalıştır","ParameterValues":"Function=pe.tarihGonder('{CALL:pe.wpdate('[:LoopValue]')}')`Komut=`Parametreler=`RunInBGTrueFalse=","SortOrder":10}],"AppRuleMaps":[{"DepartmentId":0,"TerminalId":0,"TicketTypeId":0,"UserRoleId":0}],"ConstraintMatch":0,"EventName":"ValueLooped","Name":"ENT- BossEntegra Günişlemleri bilgisi döndürücü","RuleConstraints":"[{\"L\":\"Name\",\"N\":\"acfWv6lPGp\",\"O\":\"Equal\",\"R\":\"WpDate\"}]","SortOrder":260,"Tags":"BossEntegra"},{"Actions":[{"ActionName":null,"CustomConstraint":null,"Name":"ENT- Komut Çalıştır","ParameterValues":"Function=pe.raporGonder('{REPORT SQL DETAILS:SELECT [Name] From [CustomReports]:F.Name::{0}::,}')`Komut=`Parametreler=`RunInBGTrueFalse=","SortOrder":10}],"AppRuleMaps":[{"DepartmentId":0,"TerminalId":0,"TicketTypeId":0,"UserRoleId":0}],"ConstraintMatch":0,"EventName":"MessageReceived","Name":"ENT- BossEntegra Gösterilecek Raporları Gönder","RuleConstraints":"[{\"L\":\"Command\",\"N\":\"LX3KdY2iVI\",\"O\":\"Equal\",\"R\":\"ENT- Rapor İsimlerini Gönder\"}]","SortOrder":270,"Tags":"BossEntegra"},{"Actions":[{"ActionName":null,"CustomConstraint":"'{GLOBAL SETTING:PosEntegraTablo}'!='OK'","Name":"ENT- Komut Çalıştır","ParameterValues":"Function=pe.addtable()`Komut=`Parametreler=`RunInBGTrueFalse=True","SortOrder":10},{"ActionName":null,"CustomConstraint":"'{GLOBAL SETTING:PosEntegraTablo}'!='OK'","Name":"ENT- Global Program Ayarı Değiştir","ParameterValues":"AyarAdı=PosEntegraTablo`AyarDegeri=OK","SortOrder":20},{"ActionName":null,"CustomConstraint":"","Name":"ENT- Değer Döndür","ParameterValues":"Adı=ENT- Wp List`Degerler={REPORT SQL DETAILS:SELECT WP.Id From WorkPeriods WP WHERE (WP.StartDate!=WP.EndDate):F.Id::{0}::,}","SortOrder":30}],"AppRuleMaps":[{"DepartmentId":0,"TerminalId":0,"TicketTypeId":0,"UserRoleId":0}],"ConstraintMatch":0,"EventName":"UserLoggedIn","Name":"ENT- BossEntegra Eski Tarihleri İşaretle 1","RuleConstraints":"[{\"L\":\"UserName\",\"N\":\"ggdPjRgkFJ\",\"O\":\"Equal\",\"R\":\"Entegrasyon\"}]","SortOrder":280,"Tags":"BossEntegra"},{"Actions":[{"ActionName":null,"CustomConstraint":null,"Name":"ENT- Komut Çalıştır","ParameterValues":"Function=pe.ciroGonder('{REPORT ACCOUNT TRANSACTION DETAILS:T.Amount.Sum:(ATT=Ödeme Hareketi)}')`Komut=`Parametreler=`RunInBGTrueFalse=True","SortOrder":10}],"AppRuleMaps":[{"DepartmentId":0,"TerminalId":0,"TicketTypeId":0,"UserRoleId":0}],"ConstraintMatch":0,"EventName":"MessageReceived","Name":"ENT- BossEntegra Ciro Gönder","RuleConstraints":"[{\"L\":\"Command\",\"N\":\"JGAU3WVdIf\",\"O\":\"Equal\",\"R\":\"ENT- Ciro Gönder\"}]","SortOrder":420,"Tags":"BossEntegra"},{"Actions":[{"ActionName":null,"CustomConstraint":null,"Name":"ENT- Komut Çalıştır","ParameterValues":"Function=pe.wpupdate('{CALL:pe.orderid('[:Command]')}')`Komut=`Parametreler=`RunInBGTrueFalse=True","SortOrder":10}],"AppRuleMaps":[{"DepartmentId":0,"TerminalId":0,"TicketTypeId":0,"UserRoleId":0}],"ConstraintMatch":0,"EventName":"MessageReceived","Name":"ENT- BossEntegra Wp Gönder","RuleConstraints":"[{\"L\":\"Command\",\"N\":\"JGAU3WVdIf\",\"O\":\"Starts\",\"R\":\"ENT- Wp Gönder\"}]","SortOrder":430,"Tags":"BossEntegra"},{"Actions":[{"ActionName":null,"CustomConstraint":null,"Name":"ENT- Komut Çalıştır","ParameterValues":"Function=pe.wpupdate('[:LoopValue]')`Komut=`Parametreler=`RunInBGTrueFalse=True","SortOrder":10}],"AppRuleMaps":[{"DepartmentId":0,"TerminalId":0,"TicketTypeId":0,"UserRoleId":0}],"ConstraintMatch":0,"EventName":"ValueLooped","Name":"ENT- BossEntegra Eski Tarihleri İşaretle 2","RuleConstraints":"[{\"L\":\"Name\",\"N\":\"JGAU3WVdIf\",\"O\":\"Equal\",\"R\":\"ENT- Wp List\"}]","SortOrder":430,"Tags":"BossEntegra"},{"Actions":[{"ActionName":null,"CustomConstraint":null,"Name":"ENT- Text Dosyaya Satır Ekle","ParameterValues":"dosyaYolu=c:\\peClient\\wpSenkronize.txt`text={CALL:pe.wpdateall()}","SortOrder":10}],"AppRuleMaps":[{"DepartmentId":0,"TerminalId":0,"TicketTypeId":0,"UserRoleId":0}],"ConstraintMatch":0,"EventName":"UserLoggedIn","Name":"ENT- BossEntegra Wp Senkronize","RuleConstraints":"[{\"L\":\"UserName\",\"N\":\"csu6UmWYue\",\"O\":\"Equal\",\"R\":\"Entegrasyon\"}]","SortOrder":430,"Tags":"BossEntegra"}],"Scripts":[{"Code":"function orderid(entityname) {\u000d\u000a  var str = entityname;\u000d\u000a  var patt1 = \/\\d{1,}\/g; \u000d\u000a  var result = str.match(patt1);\u000d\u000a  return result [0]\u000d\u000a}\u000d\u000afunction ekodu(mesaj) {\u000d\u000a  var str = mesaj;\u000d\u000a \u0009str = str.replace('ENT-YeniSiparis-','')\u000d\u000a \u0009return str\u000d\u000a}\u000d\u000afunction degistir(degis,mesaj) {\u000d\u000a  var str = mesaj;\u000d\u000a \u0009str = str.replace(degis,'')\u000d\u000a \u0009return str\u000d\u000a}\u000d\u000a\u000d\u000afunction cnv(mesaj) {\u000d\u000a  var str = mesaj;\u000d\u000a \u0009str = str.replace(',','.')\u000d\u000a \u0009return str\u000d\u000a}\u000d\u000a\u000d\u000a\u000d\u000afunction order(orderid) {\u000d\u000a   var  u = 'https:\/\/app.posentegra.com\/pe\/changeStatus?id='+orderid+'&token=ndbngpKPABDn24G2';\u000d\u000a   var data=web.Download(u)\u000d\u000a   return data\u000d\u000a}\u000d\u000a\u000d\u000afunction orderCancelOptions(orderid) {\u000d\u000a\u0009var  u = 'https:\/\/app.posentegra.com\/pe\/cancel-options\/'+orderid;\u000d\u000a\u0009var data=web.Download(u)\u000d\u000a\u0009var dataparsed = JSON.parse(data);\u000d\u000a\u0009var optionslength = dataparsed.length;\u000d\u000a\u0009var optionsListBuild\u0009= \"\";\u000d\u000a\u0009for (var o = 0; o<optionslength;o++)\u000d\u000a\u0009{\u000d\u000a\u0009optionsListBuild\u0009+= '\"<background purple><hover orange><color white><block 0 transparent left 1100>  * '+dataparsed[o].message+'<\/block><\/color><\/hover><\/background>='+dataparsed[o].id+'\",';\u000d\u000a\u0009}\u000d\u000a\u0009var optionsList\u0009\u0009= optionsListBuild.slice(0,-1)\u000d\u000a\u0009return optionsList  \u0009\u0009\u000d\u000a}\u000d\u000a\u000d\u000a\u000d\u000afunction orderTransferGetRest(orderid) {\u000d\u000a\u0009var  u = 'https:\/\/app.posentegra.com\/pe\/available-restaurants-for-transfer\/'+orderid;\u000d\u000a\u0009var data=web.Download(u)\u000d\u000a    var dataparsed = JSON.parse(data);\u000d\u000a\u0009var optionslength = dataparsed.length;\u000d\u000a\u0009var optionsListBuild\u0009= \"\";\u000d\u000a\u0009for (var o = 0; o<optionslength;o++){\u000d\u000a\u0009optionsListBuild\u0009+= '<background purple><hover orange><color white><block 0 transparent left 1100>  * '+dataparsed[o].name+'<\/block><\/color><\/hover><\/background>='+dataparsed[o].id+',';\u000d\u000a\u0009}\u000d\u000a\u0009var optionsList\u0009\u0009= optionsListBuild.slice(0,-1)\u000d\u000a \u0009return optionsList  \u0009\u0009\u000d\u000a}\u000d\u000a\u000d\u000a\u000d\u000afunction orderCancel(orderid,reasonid,note)\u000d\u000a{\u000d\u000a     var url = 'https:\/\/app.posentegra.com\/pe\/cancelWithReason\/'+orderid+'\/'+reasonid+'?note='+note;\u000d\u000a     var data=web.Download(url)\u000d\u000a     return data\u000d\u000a}\u000d\u000a\u000d\u000a\u000d\u000afunction orderTransfer(restoranid)\u000d\u000a{\u000d\u000a     var url = 'https:\/\/app.posentegra.com\/pe\/transfer-to-another-restaurant\/'+restoranid;\u000d\u000a     var data=web.Download(url)\u000d\u000a     return data\u000d\u000a}\u000d\u000a\u000d\u000afunction wpdate(wpid){\u000d\u000avar dt = sql.Exec(\"SELECT WP.Id,WP.StartDate,WP.EndDate From WorkPeriods WP WHERE (WP.PosEntegra is NULL OR WP.PosEntegra!='OK') AND WP.Id=\"+wpid+\" AND WP.StartDate!=WP.EndDate\");\u000d\u000areturn dt[0];\u000d\u000a}\u000d\u000a\u000d\u000afunction wpdateall() {\u000d\u000a    var dt = sql.Exec(\"SELECT WP.Id,WP.StartDate,WP.EndDate From WorkPeriods WP WHERE WP.StartDate!=WP.EndDate\");\u000d\u000a    var text = [];\u000d\u000a    for (var index = 0; index < dt.Length; index++) {\u000d\u000a        var element = dt[index];\u000d\u000a        text.push(element);\u000d\u000a    }\u000d\u000a    return text.join(\"-\");\u0009\u000d\u000a}\u000d\u000a\u000d\u000a\u000d\u000afunction wpupdate(wpid){\u000d\u000avar up = sql.Exec(\"UPDATE [WorkPeriods] SET PosEntegra='OK' WHERE Id=\"+wpid+\" AND [StartDate]!=[EndDate]\");\u000d\u000areturn up[0];\u000d\u000a}\u000d\u000a\u000d\u000afunction spver(ver){\u000d\u000avar up = sql.Exec(\"SELECT [Version] From [VersionInfo] Where [Version]=\"+ver+\"\");\u000d\u000areturn up[0];\u000d\u000a}\u000d\u000a\u000d\u000afunction addtable(){\u000d\u000a   sql.Exec(\"ALTER TABLE Workperiods ADD PosEntegra VARCHAR(20) NULL ;\");\u000d\u000a}\u000d\u000a\u000d\u000afunction raporGonder(raporAdi){\u000d\u000a   var url = 'http:\/\/localhost:3000\/raporGonder?name='+raporAdi;\u000d\u000a     var data=web.Download(url)\u000d\u000a     return data\u000d\u000a}\u000d\u000a\u000d\u000afunction tarihGonder(id){\u000d\u000a   var url = 'http:\/\/localhost:3000\/tarihGonder?id='+id;\u000d\u000a     var data=web.Download(url)\u000d\u000a     return data\u000d\u000a}\u000d\u000afunction ciroGonder(ciro){\u000d\u000a   var url = 'http:\/\/localhost:3000\/ciroGonder?ciro='+ciro;\u000d\u000a     var data=web.Download(url)\u000d\u000a     return data\u000d\u000a}\u000d\u000a\u000d\u000afunction odemeTipiGonder(ot){\u000d\u000a   var url = 'http:\/\/localhost:3000\/odemeTipiGonder?ot='+ot;\u000d\u000a     var data=web.Download(url)\u000d\u000a     return data\u000d\u000a}\u000d\u000a\u000d\u000afunction copy(dosyayolu,yenidosyayolu){\u000d\u000a   var object = new ActiveXObject(\"Scripting.FileSystemObject\");\u000d\u000a   var file = object.GetFile(dosyayolu);\u000d\u000a   file.Copy(yenidosyayolu);\u000d\u000a}\u000d\u000afunction del(dosyayolu){\u000d\u000a   var object = new ActiveXObject(\"Scripting.FileSystemObject\");\u000d\u000a   var file = object.GetFile(dosyayolu);\u000d\u000a   file.Delete();\u000d\u000a}\u000d\u000a","HandlerName":"pe","Name":"ENT- Komutlar"}],"States":null,"TaskTypes":null,"TicketTagGroups":null,"TicketTypes":null,"Triggers":null}